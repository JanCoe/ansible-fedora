- name: Install development tools. 
  become: true
  package:
    name: "{{ dev_tools }}"
    state: present

- name: Enable wezterm Copr repository.
  become: true
  command: dnf copr enable wezfurlong/wezterm-nightly -y

- name: Enable yazi Copr repository.
  become: true
  command: dnf copr enable lihaohong/yazi -y

- name: Add nushell repo using template.
  become: true
  template:
    src: yum.repo.j2
    dest: /etc/yum.repos.d/fury-nushell.repo
    mode: '0644'
  vars:
    repo_id: gemfury-nushell
    repo_name: Gemfury Nushell Repo
    baseurl: https://yum.fury.io/nushell/
    gpgcheck: 0
    gpgkey: https://yum.fury.io/nushell/gpg.key

- name: Install CLI tools.
  become: true
  dnf:
    name: "{{ cli_tools }}"
    state: present

# this doesn't work
- name: Install rustup (if not already installed).
  shell: |
    curl https://sh.rustup.rs -sSf | sh -s -- -y
  args:
    creates: "/home/{{ real_user }}/.cargo/bin/rustc"

- name: Ensure ~/.cargo/bin is in PATH for this session.
  shell: |
    echo 'export PATH="/home/{{ real_user }}/.cargo/bin:$PATH"' >> "/home/{{ real_user }}/.bashrc"

# this isn't working
- name: Install Cargo packages.
  community.general.cargo:
    name: 
      - cargo-update
      - cargo-watch
      - du-dust
      - dua
      - hyperfine
      - starship
      - tokei
    state: present

- name: Install Jetbrains toolbox.
  become: true
  dnf:
    name: fuse-libs
    state: present

- name: Create Projects directory.
  file:
    path: "/home/{{ real_user }}/Projects"
    state: directory
